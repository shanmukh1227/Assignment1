<!DOCTYPE html>
<html lang="en">
    <head>
        <title></title>
        <style>
       .fail-row{
        background-color: red;
       }
        </style>
        
    </head>
    <body>
        
            
        
        <button class="btn" onclick="adddata()">click to add data</button> 
       
       
       <button  class="btn"  onclick="showdata()">click to showdata</button>
        <table border="1" cellspacing="0">
        <tbody id="tabledata">
            
        </tbody>
        </table>

       <button class="btn"  onclick="sortmarks()">click to showdata sortedmarks</button>
       <ul id="item2"></ul>

       <button class="btn"  onclick="passmarks()">passmarks of students</button>
       <ul id="item3"></ul>

       <button class="btn"  onclick="CseStudents()" >cse students</button>
       <ul id="item4"></ul>

       <button class="btn"  onclick="highmarks()">Highest marks</button>
       <p id="hm"></p>

       <button class="btn"  onclick="avg_data()">Average marks</button>
       <p id="avgm"></p>

       <button  class="btn"  onclick="deptwise()">showdata by deptwise</button>
         <table border="1" cellspacing="0">
           <tbody id="tabledata2">
            
           </tbody>
         </table>

       <button  class="btn"  onclick="failedStudents()">students failed</button>
         <table border="1" cellspacing="0">
           <tbody id="tabledata3">
            
           </tbody>
         </table>

       

    <script>
        let student_data=[{ id: 1, name: "Amit", marks: 78, dept: "CSE" },
  { id: 2, name: "Priya", marks: 92, dept: "ECE" },
  { id: 3, name: "Rahul", marks: 45, dept: "MECH" },
  { id: 4, name: "Sneha", marks: 66, dept: "CSE" },
  { id: 5, name: "Kiran", marks: 88, dept: "ECE" }];
        
        function adddata(){
            
            var id=prompt("enter student_id:");
            var name=prompt("enter student_name:");
            var marks=parseInt(prompt("enter marks:"));
            var dept=prompt("enter department");
            student_data.push({
            id: id,
            name: name,
            marks: marks,
            dept: dept
        });
            // console.log(student_data);

        }
        function showdata(){
            let tbody = document.getElementById("tabledata");
             tbody.innerHTML = "";
             for(i of student_data){
            let row=document.createElement("tr");
            row.innerHTML =  `
            <td>${i.id}</td>
            <td>${i.name}</td>
            <td>${i.marks}</td>
            <td>${i.dept}</td>
              
            `
            tbody.appendChild(row);
        }
            
        }
        function sortmarks(){
            let ulelement=document.getElementById("item2");
            ulelement.innerHTML="";
            let studentsortmarks=student_data.sort((a,b)=> b.marks-a.marks);
            for(let i of studentsortmarks ){
                let li=document.createElement("li");
                li.textContent =  `ID:${i.id}  Name:${i.name}  Marks:${i.marks} Department:${i.dept}`
                ulelement.appendChild(li);

            }

        }

        function passmarks(){
            let ulelement=document.getElementById("item3");
            ulelement.innerHTML="";
            let passmark=student_data.filter(n=>n.marks>60);
            for(let i of passmark){
                let li=document.createElement('li');
            
                li.textContent =  `ID:${i.id}  Name:${i.name}  Marks:${i.marks} Department:${i.dept}`
                ulelement.appendChild(li);
            }
        }

        function CseStudents(){

            let ulelement=document.getElementById("item4");
            ulelement.innerHTML="";
            let filcse=student_data.filter(n=>n.dept==="CSE");
            for(let i of filcse){
                let li=document.createElement('li');
            
                li.textContent="ID: " + i.id + ", Name: " + i.name +", Marks: " + i.marks + ", Dept: " + i.dept;
                ulelement.appendChild(li);
            }
        }

        function highmarks(){
            let hmarks=student_data.sort((a,b)=>b.marks-a.marks)[0];
            var h=document.getElementById("hm").innerHTML=`Highest marks for ${hmarks.name} got ${hmarks.marks}marks`

        }
        var avg_marks=0;
        
        function avg_data(){
            
            
            let sum=0;
            for(i of student_data){
                 sum=sum+i.marks;
            }
            avg_marks=sum/student_data.length;
            let ulelement=document.getElementById("avgm").textContent=`Average marks of all students:${avg_marks}`;
        }

        var cse=0;
        var ece=0;
        var mech=0;

        function deptwise(){
             cse=0;
             ece=0;
             mech=0;

            let tbody = document.getElementById("tabledata2");
             tbody.innerHTML = "";
             for(let i of student_data){               
                if(i.dept==="CSE"){
                    cse=cse+1;
                }  
                else if(i.dept==="ECE"){
                    ece++;

                }
                else if(i.dept==="MECH"){
                    mech++
                }
             }
             tbody.innerHTML=`
             <tr>
                <td>CSE</td>
                <td>${cse}</td>
            </tr>
            <tr>
                <td>ECE</td>
                <td>${ece}</td>
            </tr>
            <tr>
                <td>MECH</td>
                <td>${mech}</td>
            </tr>`
            
        }

        function failedStudents(){
            let tbody=document.getElementById("tabledata3");
            tbody.innerHTML="";

            for(let i of student_data){
                let row=document.createElement("tr");
                if(i.marks<60){
                    row.classList.add("fail-row");
                }
                
                    
                    row.innerHTML=`
                    <td>${i.id}</td>

                    <td>${i.name}</td>
                    <td>${i.marks}</td>
                    <td>${i.dept}</td>
                    `
                
                tbody.appendChild(row)
            }
        }

        

    </script>

    
</body>
</html>